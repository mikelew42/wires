var TestFramework = require("../test/framework");
var test = TestFramework.test;
var assert = console.assert.bind(console);
var is = require("../is");
var $ = require("jquery");
var View = require("./View");
var Div = require("./Div");
View.Page = View.Page || require("./Page");
View.Pager = View.Pager || require("./Pager");
// require("./even-more.less");

var logger = require("log42");
var log = logger();

var xtest = function(){};

var Pager = View.Pager.extend({
	autoRender: false
});

var Page = View.Page.extend({
	css: {
		minWidth: "400px",
		padding: "1em 2em",
		margin: "0 2em"
	},
	activate: function(){
		var page = this;

		if (!this.flex){
			this.flex = FlexPager({
				left: function(){
					this.to(page);
					page.pager = this;
				}
			})
		} 
		this.parent.pager.parent.right.to(this.flex);
	}
});

Page.prototype.SubPage = Page.extend({
	name: "SubPage"
})

var FlexPager = View.extend({
	name: "FlexPager",
	css: {
		display: "flex"
	},
	Left: Pager.extend({
		addClass: "left"
	}),
	Right: Pager.extend({
		addClass: "right"
	}),
	content: function(){
		this.left.render();
		this.right.render();
	}
});


$(function(){

test("FlexPager", function(){
	var flex = FlexPager({
		css: {
			overflowX: "scroll"
		},
		left: function(){
			this.to(Page({
				name: "test",
				pager: this,
				flex: this.parent,
				size: 4,
				depth: 5
			}).render())
		}
	})
});

});