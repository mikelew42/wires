var Mod1 = require("./Mod1");
var logger = require("log42/logger");

var install_logger = function(mod, value){
	var log = logger(value);
	Object.defineProperty(mod, "log", {
		configurable: true,
		get: function(){
			return log;
		},
		set: function(value){
			install_logger(this, value);
		}
	});
};

var Mod2 = Mod1.extend({
	name: "Mod2",
	set: {
		// allow Mod({ log: true/false }) and Mod.extend({ log: true/false })
		obj: function(mod, obj){
			for (var i in obj){
				if (i === "log")
					install_logger(mod, obj[i])
				else
					this.prop(mod, obj, i);
			}
		}
	}
});

install_logger(Mod2.prototype);

module.exports = Mod2;